- var smaCount = 40
- var brtCount = 30
- var expCount = 0
- var nonCount = 0
- var sma = "SMA"
- var brt = "BRT"
- var exp = "EXPRESS"
- var non = "NON-REV"
- for bus in addBus
    if bus.type == sma
      - smaCount--
    if bus.type == brt
      - brtCount--
    if bus.type == exp
      - expCount++
    if bus.type == non
      - nonCount++
- var date = new Date().getTime()

doctype html
html
  head
    link(rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css' integrity='sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO' crossorigin='anonymous')
    link(rel='stylesheet', href='/Users/Macbook/Documents/GitHub/RTD-Passdown/style/table.css')
  body
    h1.row.justify-content-center.mt-3(style='color:#800000;') CONTROLLER
    .row.justify-content-center
      table
        tr
          td
            h4 TOTAL BUSES ON HOLD: #{addBus.length}
          td(style='padding:16px;')
            h4 SMA RUNNING: #{smaCount}
          td(style='padding:16px;')
            h4 BRT RUNNING: #{brtCount}
          td(style='padding:16px;')
            h4 EXPRESS ON HOLD: #{expCount}
          td(style='padding:16px;')
            h4 NON-REV ON HOLD: #{nonCount}
      table.table.table-bordered(style='width:95%; box-shadow: 2px 2px 10px 0px rgba(0,0,0,0.15);')
        thead
          tr(style='background-color:#800000; color:white;')
            th BUS #
            th TYPE
            th DATE IDENTIFIED
            th NO PART
            th REASON DOWN
            th DESCRIPTION
            th DAYS OUT
            th UPDATE / DELETE
        -for bus in addBus
          tr.m-1.font-weight-light#passdownTable
            input(type='hidden', name='id', value='bus._id' ) 
            td(name='arcNum') #{bus.busNumber}
            td(name='arcType') #{bus.type}
            td(name='arcDate') #{moment(bus.date).format('MMM Do YYYY')}
            td(name='arcPart') #{bus.noPart}
            td(name='arcReason') #{bus.reason}
            td(name='arcDesc') #{bus.description}
            - busSecs = Math.round((date - bus.date.getTime())/86400000)
            if busSecs > 14
              td(name='arcServ' style='color: red') #{busSecs}
            else
              td(name='arcServ') #{busSecs}
            td
              .row
                a.ml-3.mr-3(href='/toEditPage/#{bus._id}', action='/editPage')
                  button.btn.btn-primary.btn-sm(type='button') Update
                form(method='GET', action='/delete/#{bus._id}')
                  button.btn.btn-sm.btn-danger(type='submit') Delete
        thead
    .row.justify-content-center.mt-5
      div.card.font-weight-light
        form(method='POST', action='/submit' style='box-shadow: 2px 2px 10px 0px rgba(0,0,0,0.15);')
          .row.justify-content-center.mt-3
            h4.font-weight-light Add A Bus 
          .row.justify-content-center
            .col-md-4
              label.font-weight-light Bus #:
              input.form-control(type='text', name='inputBus' required)
            .form-group.col-md-4
              label.font-weight-light Bus Type:
              select.form-control(type='text', name='inputType' required)
                option(selected='') #{''}
                option SMA
                option BRT
                option NON-REV
                option EXPRESS
          .row.justify-content-center
            .col-md-4
              label.font-weight-light Date Identified:
              input.form-control(type='date', name='inputDate', placeholder='MM/DD/YY' required)
            .form-group.col-md-4
              label.font-weight-light No Part:
              select.form-control(type='text', name='inputNoPart' required)
                option(selected='') 
                option True
                option False
          .row.justify-content-center
            .col-md-4
              label.font-weight-light Reason:
              input.form-control(type='text', name='inputReason' required)
            .col-md-4
              label.font-weight-light Description:
              input.form-control(type='text', name='inputDesc')
          .row.justify-content-center.m-3
              button.btn.btn-primary(type='submit') Submit
    .row.justify-content-center.pt-5
      a(href='/archive')
        button.btn.btn-primary.mb-4(type='button') Go To Archives
    form
      script(type='text/javascript', src='/Users/Macbook/Documents/GitHub/RTD-Passdown/index.js')